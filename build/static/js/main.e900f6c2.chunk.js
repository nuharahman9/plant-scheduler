(this["webpackJsonpplant-scheduler"]=this["webpackJsonpplant-scheduler"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},31:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(13),c=n.n(a),s=(n(31),n(23)),r=n(24),i=n(26),l=n(25),o=n(9),u=n.n(o),d=n(5),j=n(12),b=n(7),h=n(3),p=n.n(h),f=(n(16),n(19)),O=(n(22),n(40),f.a.initializeApp({apiKey:"AIzaSyDBnwxstB5kqv2kftbHkPRqKxIKiYHSyyI",authDomain:"plant-scheduler.firebaseapp.com",projectId:"plant-scheduler",storageBucket:"plant-scheduler.appspot.com",messagingSenderId:"592683487390",databaseURL:"https://plant-scheduler-default-rtdb.firebaseio.com/",appId:"1:592683487390:web:f66ef11e6259e6c21aeb8f",measurementId:"G-WRDPGS0N38"})),m=(O.auth(),f.a.storage()),g=O,x=(n(35),g.firestore()),v=(n(20),n(14)),w=(n(21),n(1)),y=function(e){var t=Object(h.useState)({id:"",name:"",species:"",lastwatered:"",wateringfrequency:-1,notes:""}),n=Object(b.a)(t,2),a=n[0],c=n[1],s=Object(h.useState)(null),r=Object(b.a)(s,2),i=r[0],l=r[1],o=function(e){c(Object(d.a)(Object(d.a)({},a),{},{name:e.target.value}))},p=function(e){c(Object(d.a)(Object(d.a)({},a),{},{species:e.target.value}))},f=function(e){c(Object(d.a)(Object(d.a)({},a),{},{notes:e.target.value}))},O=function(e){c(Object(d.a)(Object(d.a)({},a),{},{lastwatered:e.target.value}))},y=function(e){c(Object(d.a)(Object(d.a)({},a),{},{wateringfrequency:e.target.value}))},N=function(e){e.target.files[0]&&l(e.target.files[0])};function S(e){return k.apply(this,arguments)}function k(){return(k=Object(j.a)(u.a.mark((function t(n){var c,s,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=g.auth().currentUser.uid,s=x.collection("users").doc(c),r=s.collection("plants").doc(),i={wateringfrequency:a.wateringfrequency,photo:n,notes:a.notes,name:a.name,id:r.id,nextwatering:0,species:a.species,lastwatered:a.lastwatered},t.next=6,r.set(i).then((function(){e.onNewPlant(i)}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(){if(null!==i)m.ref().child(i.name).put(i).on("state_changed",(function(e){}),(function(e){}),(function(){m.ref().child(i.name).getDownloadURL().then((function(e){S(e)}))}));else{S("https://firebasestorage.googleapis.com/v0/b/plant-scheduler.appspot.com/o/default.gif?alt=media&token=ccfeb641-a758-4df3-a9ee-339f9f7b6f29")}}return Object(w.jsx)(v.a,{trigger:Object(w.jsx)("button",{className:"navbutton",children:"new plant"}),modal:!0,children:function(e){return Object(w.jsx)("div",{className:"overlay",children:Object(w.jsxs)("div",{className:"box",children:[Object(w.jsx)("a",{className:"close",onClick:function(t){t.preventDefault(),c({name:"",id:"",species:"",lastwatered:"",nextwatering:"",wateringfrequency:"",notes:"",photo:""}),l(null),e()},href:"/",children:"\xd7"}),Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{className:"header",children:"new plant"})," ",Object(w.jsxs)("form",{className:"content",onSubmit:function(t){t.preventDefault(),q(),e()},children:[Object(w.jsx)("label",{htmlFor:"name",children:" Name: "}),Object(w.jsx)("input",{placeholder:"Name",id:"name",className:"fields",onChange:o,required:!0}),Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"species",children:"Species: "}),Object(w.jsx)("input",{placeholder:"Species",id:"species",className:"fields",onBlur:p}),Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"date",children:"The last day you watered it: "}),Object(w.jsx)("input",{type:"date",placeholder:"Date last watered",id:"date",className:"fields",onChange:O,required:!0})," ",Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"frequency",children:"How often should we remind you?"})," ",Object(w.jsx)("br",{}),Object(w.jsxs)("label",{htmlFor:"frequency",children:["Every",Object(w.jsx)("input",{type:"number",min:"1",className:"fields",id:"frequency",onBlur:y,required:!0}),"day(s)."]}),Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"notes",children:" Anything else to remember? "}),Object(w.jsx)("br",{}),Object(w.jsx)("textarea",{className:"fields",id:"notes",onBlur:f}),Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"photo",children:" Upload Icon "}),Object(w.jsx)("input",{type:"file",id:"photo",onChange:N}),Object(w.jsx)("button",{type:"submit",children:"submit"})]})]})]})})}})},N=function(e){return Object(w.jsxs)("div",{className:"nav",children:[Object(w.jsx)("button",{onClick:e.logoutHandler,className:"navbutton",children:"log out"}),Object(w.jsx)(y,{onNewPlant:e.changeState,size:e.length+1})]})},S=(n(37),function(e){var t=Object(h.useState)({id:e.current.id,name:e.current.name,species:e.current.species,lastWatered:e.current.lastwatered,wateringFrequency:e.current.wateringfrequency,notes:e.current.notes}),n=Object(b.a)(t,2),a=n[0],c=n[1],s=Object(h.useState)(null),r=Object(b.a)(s,2),i=r[0],l=r[1],o=Object(h.useState)(!1),p=Object(b.a)(o,2),f=p[0],O=p[1],y=e.current.photo,N="https://firebasestorage.googleapis.com/v0/b/plant-scheduler.appspot.com/o/default.gif?alt=media&token=ccfeb641-a758-4df3-a9ee-339f9f7b6f29",S=g.auth().currentUser.uid,k=function(e){a.name!==e.target.value&&null!==e.target.value&&c(Object(d.a)(Object(d.a)({},a),{},{name:e.target.value}))},q=function(e){a.species!==e.target.value&&null!==e.target.value&&c(Object(d.a)(Object(d.a)({},a),{},{species:e.target.value}))},F=function(e){a.lastWatered!==e.target.value&&null!==e.target.value&&c(Object(d.a)(Object(d.a)({},a),{},{lastWatered:e.target.value}))},C=function(e){a.notes!==e.target.value&&null!==e.target.value&&c(Object(d.a)(Object(d.a)({},a),{},{notes:e.target.value}))},D=function(e){e.target.files[0]&&l(e.target.files[0])},I=function(e){a.wateringFrequency!==e.target.value&&null!==e.target.value&&c(Object(d.a)(Object(d.a)({},a),{},{name:e.target.value}))},E=function(){O(!f)};function A(){O(!1)}function W(){f?function(){B.apply(this,arguments)}():i?H():L(y)}function P(){return U.apply(this,arguments)}function U(){return(U=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.refFromURL(y).delete().catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(j.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=x.collection("users").doc(S),t.next=3,n.collection("plants").doc(e.current.id.toString()).delete().then((function(){y!==N&&P(),e.onDelete(e.current.id,e.current.name)}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var H=function(){m.ref().child(i.name).put(i).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){m.ref().child(i.name).getDownloadURL().then((function(e){L(e)}))}))};function L(e){return R.apply(this,arguments)}function R(){return(R=Object(j.a)(u.a.mark((function t(n){var c,s,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=x.collection("users").doc(S),s=c.collection("plants").doc(a.id.toString()),r={name:a.name,species:a.species,lastwatered:a.lastWatered,nextwatering:0,notes:a.notes,photo:n,wateringfrequency:a.wateringFrequency},s.set(r,{merge:!0}).then((function(){A(),e.onEdit(r,e.index)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(w.jsx)(v.a,{trigger:Object(w.jsx)("button",{className:"edit",children:"edit info "}),modal:!0,nested:!0,children:function(t){return Object(w.jsx)("div",{className:"overlay",children:Object(w.jsxs)("div",{className:"box",id:"ext",children:[Object(w.jsx)("a",{className:"close",onClick:function(e){e.preventDefault(),A(),t()},href:"/",children:"\xd7"}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("h1",{className:"header",children:["edit ",e.current.name," "]})," ",Object(w.jsxs)("form",{className:"content",onSubmit:function(e){e.preventDefault(),W(),t()},children:[Object(w.jsx)("label",{htmlFor:"edit-nm",children:"Name: "}),Object(w.jsx)("input",{defaultValue:a.name,id:"edit-nm",className:"fields",onChange:k})," ",Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"edit-spec",children:"Species: "}),Object(w.jsx)("input",{defaultValue:a.species,id:"edit-spec",className:"fields",onChange:q}),Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"edit-date",children:"Last Watered: "}),Object(w.jsx)("input",{type:"date",defaultValue:a.lastWatered,className:"fields",id:"edit-date",onChange:F})," ",Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"edit-freq",children:"Watering Frequency: "}),Object(w.jsx)("input",{type:"number",className:"fields",defaultValue:a.frequency,id:"edit-freq",onChange:I})," ",Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"edit-notes",children:"Additional Notes: "}),Object(w.jsx)("textarea",{defaultValue:a.notes,id:"edit-notes",className:"fields",onChange:C})," ",Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"edit-photo",children:"Upload Photo:  "}),Object(w.jsx)("input",{type:"file",placeholder:"Upload Photo",value:a.photo,id:"edit-photo",onChange:D})," ",Object(w.jsx)("br",{})," ",Object(w.jsx)("br",{}),Object(w.jsx)("label",{htmlFor:"deleted",children:" Delete Plant "}),Object(w.jsx)("input",{type:"radio",onChange:E,id:"deleted",name:"deleted",className:"fields"}),Object(w.jsx)("p",{id:"error"}),Object(w.jsx)("button",{type:"submit",id:"save",children:"save changes"})]})]})]})})}})});var k=function(e){var t=Object(h.useState)(!1),n=Object(b.a)(t,2),a=n[0],c=n[1],s=Object(h.useState)(!1),r=Object(b.a)(s,2),i=r[0],l=r[1],o=Object(h.useState)({classes:"",name:""}),u=Object(b.a)(o,2),j=u[0],p=u[1],f=e.rendered;function O(e,t){var n=Date.parse(e.lastwatered)+864e5*e.wateringfrequency,s=6e4*(new Date).getTimezoneOffset(),r=Math.ceil((n-Date.now()+s)/864e5);e=Object(d.a)(Object(d.a)({},e),{},{nextwatering:r}),f[t]=e,c(!a)}function m(e,t){x({classes:"alert",messages:t+" was successfully deleted."});var n=f.findIndex((function(t){return t.id===e}));f.splice(n,1),0===f.length?(f.push(0),l(!0)):l(!1)}function g(e,t){O(e,t),x({classes:"alert",message:"Saved changes to "+e.name+"."})}function x(e){e&&(p({message:e.message,classes:e.classes}),setTimeout((function(){p({message:"",classes:""})}),4e3))}function v(e){return 0===e.num?Object(w.jsx)("p",{children:"just in time! make sure to water that thang today girl"}):e.num<0?-1===e.num?Object(w.jsxs)("p",{children:["Fuck bro ur killing ur plant!!! it's been like ",-1*e.num.toString()," day! go!"]}):Object(w.jsxs)("p",{children:["Fuck bro ur killing ur plant!!! it's been like ",-1*e.num.toString()," days! go!"]}):1===e.num?Object(w.jsx)("p",{children:"You next watering is tomorrow."}):Object(w.jsxs)("p",{children:["Your next watering is in ",e.num.toString()," days."]})}return Object(h.useEffect)((function(){0===f[0]||f.empty?l(!0):l(!1)}),[f]),Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{children:Object(w.jsx)(N,{logoutHandler:e.LogoutHandler,length:f.length,changeState:function(e){0===f[0]&&f.splice(0,1),f.push(e),O(e,f.length-1),x({classes:"alert",message:"Successfully added "+e.name+"."}),l(!1)}})}),Object(w.jsx)("p",{className:j.classes,value:j,children:j.message}),Object(w.jsx)("div",{id:"list",value:i,children:i?Object(w.jsx)("h1",{className:"new-plant",children:" click 'neW plAnt' to Get started. "}):f.map((function(e,t){return Object(w.jsxs)("div",{value:e,className:"card",children:[Object(w.jsx)("img",{src:e.photo,alt:"",width:"500",height:"500",className:"photo"}),Object(w.jsxs)("p",{children:[e.name," "]}),Object(w.jsxs)("p",{children:["last watered on ",e.lastwatered]}),""!==e.species?Object(w.jsxs)("p",{children:["species: ",e.species," "]}):null,""!==e.notes?Object(w.jsxs)("p",{children:["additional notes: ",e.notes]}):null,Object(w.jsx)(v,{num:parseInt(e.nextwatering),value:e.nextwatering}),Object(w.jsx)(S,{current:e,onEdit:g,onDelete:m,index:t,className:"edit"})]},t)}))})]})},q=function(){var e=Object(h.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],s=Object(h.useState)(""),r=Object(b.a)(s,2),i=r[0],l=r[1],o=Object(h.useState)(""),f=Object(b.a)(o,2),O=f[0],m=f[1],v=Object(h.useState)(!0),y=Object(b.a)(v,2),N=y[0],S=y[1],q=Object(h.useState)(""),F=Object(b.a)(q,2),C=F[0],D=F[1],I=Object(h.useState)(""),E=Object(b.a)(I,2),A=E[0],W=E[1],P=Object(h.useState)("not-auth"),U=Object(b.a)(P,2),B=U[0],H=U[1],L=[0],R=function(e){l(e.target.value)},z=function(e){m(e.target.value)},V=function(){D(""),W("")},T=function(e){e.preventDefault(),V(),g.auth().signInWithEmailAndPassword(i,O).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/user-not-found":H("not-auth error"),D(e.message);break;case"auth/wrong-password":H("not-auth error"),W(e.message),m("")}}))},G=function(e){e.preventDefault(),V(),g.auth().createUserWithEmailAndPassword(i,O).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/email-already-in-use":D(e.message),H("not-auth error");break;case"auth/weak-password":W(e.message),H("not-auth error");break;default:M()}}))},K=function(){g.auth().signOut().then((function(){l(""),S(!0),D(""),m(""),H("not-auth");var e=L.length;L.splice(0,e),L.push(0),c.a.unmountComponentAtNode(document.getElementById("plantlist")),a("")}))},M=function(){g.auth().onAuthStateChanged((function(e){e?e.uid!==n.uid&&(a(e),function(e){Y.apply(this,arguments)}(e.uid)):""!==n&&a("")}))};function Y(){return(Y=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.collection("users").doc(t),e.next=3,n.collection("plants").get().then((function(e){e.empty||(L.splice(0,L.length),e.forEach((function(e){var t=e.data(),n=Date.parse(t.lastwatered)+864e5*t.wateringfrequency,a=6e4*(new Date).getTimezoneOffset(),c=Math.ceil((n-Date.now()+a)/864e5);t=Object(d.a)(Object(d.a)({},t),{},{nextwatering:c}),L.push(t)}))),c.a.render(p.a.createElement(k,{rendered:L,LogoutHandler:K},null),document.querySelector("#plantlist"))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(h.useEffect)((function(){M()}));var J=function(){S(!N),_(),V()},_=function(){H("not-auth")};return Object(w.jsx)("div",{children:n?Object(w.jsx)("div",{id:"plantlist"}):""===n?Object(w.jsx)("form",{children:Object(w.jsxs)("div",{className:"login",children:[Object(w.jsx)("label",{className:"input-label",children:"Email"}),Object(w.jsx)("input",{type:"email",id:"username",className:B,onChange:R,onFocus:_,required:!0}),Object(w.jsx)("label",{className:"input-label",children:"Password"}),Object(w.jsx)("input",{type:"password",id:"pass",className:B,onChange:z,onFocus:_,required:!0}),Object(w.jsxs)("p",{className:"errorMsg",children:[A,C]}),Object(w.jsx)("div",{className:"btnContainer",children:N?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("button",{onClick:T,className:"login-reg",children:"sign in"}),Object(w.jsxs)("p",{children:["Don't have an account? ",Object(w.jsxs)("span",{onClick:J,className:"hover",children:[Object(w.jsx)("br",{}),"Sign up"]})]})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("button",{type:"submit",className:"login-reg",onClick:G,children:"Register"}),Object(w.jsxs)("p",{children:["Already have an account? ",Object(w.jsx)("br",{})," ",Object(w.jsx)("span",{onClick:J,className:"hover",children:"Sign In"})]})]})})]})}):Object(w.jsx)("div",{children:"Loading...."})})},F=(n(38),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{className:"main",children:"plAnt scHeduleR"}),Object(w.jsx)(q,{}),Object(w.jsx)("div",{id:"home"})]})}}]),n}(h.Component));c.a.render(Object(w.jsx)(F,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e900f6c2.chunk.js.map